/** Hacker's Tiny Slide Deck
 *  @author Tuomas Kareinen
 *  @license MIT
 */
!function(self){const installSlides=()=>{const headerRegex=/^h(\d)$/i,bodyEl=document.querySelector("body"),slideEls=[];let nextSlideContentEls=[];const mkSlide=()=>{const slideEl=document.createElement("div");slideEl.className="htsd-slide";let lowestHeaderFound=null;return nextSlideContentEls.forEach(e=>{const headerMatch=headerRegex.exec(e.tagName);headerMatch&&(null===lowestHeaderFound||headerMatch[1]<lowestHeaderFound)&&(lowestHeaderFound=Number(headerMatch[1])),bodyEl.removeChild(e),slideEl.appendChild(e)}),nextSlideContentEls=[],lowestHeaderFound&&slideEl.classList.add(`htsd-slide--h${lowestHeaderFound}`),slideEl};let el=bodyEl.firstChild;for(;null!=el;){const nextEl=el.nextSibling;"HR"===el.tagName?(bodyEl.removeChild(el),nextSlideContentEls.length&&slideEls.push(mkSlide())):nextSlideContentEls.push(el),el=nextEl}nextSlideContentEls.length&&slideEls.push(mkSlide()),slideEls.slice(0,1).forEach(e=>e.classList.add("htsd-slide--shown")),slideEls.forEach(e=>bodyEl.appendChild(e))},installNavigation=()=>{let currentSlide=0,totalSlides=document.querySelectorAll("body > .htsd-slide").length;const hideSlide=n=>{document.querySelectorAll("body > .htsd-slide")[n].classList.remove("htsd-slide--shown")},showSlide=n=>{document.querySelectorAll("body > .htsd-slide")[n].classList.add("htsd-slide--shown")};document.addEventListener("keydown",e=>{switch(e.key){case"ArrowRight":e.preventDefault(),currentSlide<totalSlides-1&&(hideSlide(currentSlide),showSlide(currentSlide+=1));break;case"ArrowLeft":e.preventDefault(),currentSlide>0&&(hideSlide(currentSlide),showSlide(currentSlide-=1));break;case"Home":e.preventDefault(),0!==currentSlide&&(hideSlide(currentSlide),showSlide(currentSlide=0));break;case"End":e.preventDefault(),(()=>{let lastSlide=totalSlides-1;currentSlide!==lastSlide&&(hideSlide(currentSlide),showSlide(currentSlide=lastSlide))})();break;case"F":document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen():document.querySelector("body").requestFullscreen())}})},markInstalled=()=>{document.querySelector("body").classList.add("htsd--installed")},installAll=()=>{installSlides(),installNavigation(),markInstalled()};document.currentScript.hasAttribute("data-manual")||installAll(),self.htsd=Object.freeze({installAll:installAll,installNavigation:installNavigation,installSlides:installSlides,markInstalled:markInstalled,version:"0.0.1-dev"})}(window);
